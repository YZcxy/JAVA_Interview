# 大型网站技术架构

Q：大型网站架构的演化过程是怎样的？  
A：有如下几个阶段：  
1. 单机服务：应用服务，文件，数据库都在同一台服务器上。
2. 应用服务和数据服务分开：因为应用服务对 CPU 资源需求较高，数据服务对内存、磁盘要求较高。因此进行分离，各尽其用。
3. 加入缓存：由于 80% 的业务访问往往都集中在 20% 的数据上，因此使用缓存可以改善网站的**性能**。一般可以分为本地缓存，和分布式缓存服务器。
4. 应用服务器集群：当一台服务器处理能力不足时，不要想着换更大的服务器，而是添加一台服务器进行分担。因此应用服务器的集群可以有效的改善网站的**并发处理能力**。
5. 数据库读写分离：数据库因为负载过高，往往会成为网站的瓶颈。目前大多数数据库都提供**主从复制**功能，利用这点可以实现**读写分离**，从而改善数据库的负载压力。
6. 反向代理和CDN加速：由于复杂的网络环境，网络延迟较大。通过在**运营商部署的CDN**，和在**中心机房部署的反向代理**，可以尽早返回数据给用户，还可以减轻后端的负载压力。
7. 分布式文件系统和分布式数据库系统：分布式数据库一般是最后的手段，只有在单表规模特别大的时候才会使用。更常用的是**分库分表**。
8. 使用NoSQL和搜索引擎：由于业务越来越复杂，需要通过一个**统一的数据访问模块**来访问各种数据，减轻应用程序的诸多数据麻烦。
9. 业务拆分：大型网站会业务进行拆分，交给不同的业务团队完成，每个应用独立部署。应用之间可以通过消息队列进行转发，也可以通过访问同一个数据存储系统来构建完整的系统。
10. 分布式服务：随着业务越来越小，应用系统整体的复杂度越来越高。因此需要完善的一套分布式解决方案，例如：SpringCloud。
11. 微服务：最新研究领域，常见方案：Service Mesh、Serverless。例如蚂蚁金服的 SOFA系列。

